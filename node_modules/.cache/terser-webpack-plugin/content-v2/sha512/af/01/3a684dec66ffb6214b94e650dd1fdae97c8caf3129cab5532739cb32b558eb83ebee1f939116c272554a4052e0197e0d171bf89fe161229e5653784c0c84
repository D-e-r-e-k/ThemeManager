{"code":"!function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,\"a\",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p=\"\",i(i.s=6)}({6:function(e,t){var i=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(a,o){function r(e){try{f(n.next(e))}catch(e){o(e)}}function s(e){try{f(n.throw(e))}catch(e){o(e)}}function f(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,s)}f((n=n.apply(e,t||[])).next())}))};figma.showUI(__html__),figma.ui.resize(300,480);let n={},a={},o=\"\",r=figma.root.getPluginData(\"themes\"),s=figma.root.getPluginData(\"savedImgs\"),f=figma.root.getPluginData(\"savedWorkingTheme\");r&&(n=JSON.parse(r)),s&&(a=JSON.parse(s)),f&&(o=f),Object.keys(n).length>0&&figma.ui.postMessage({type:\"loadThemes\",themes:n,imgs:a,working:o});let m=function(e){let t=\"{\";t+='\"name\":\"'+e.name+'\",',t+='\"paints\":[';for(let i of e.paints)t+=JSON.stringify(i)+\",\";return t=t.slice(0,-1),t+=\"]}\",t},g=()=>i(this,void 0,void 0,(function*(){let e=figma.getLocalPaintStyles(),t=\"[\";for(let n of e){for(let e of n.paints)if(\"IMAGE\"===e.type){var i=e.imageHash;let t=figma.getImageByHash(i),n=yield t.getBytesAsync();a[i]||(a[i]=Array.from(n))}t+=m(n)+\",\"}return figma.root.setPluginData(\"savedImgs\",JSON.stringify(a)),t=t.slice(0,-1),t+=\"]\",t})),l=e=>i(this,void 0,void 0,(function*(){let t=figma.notify(\"Saving current color theme...\");n[e.name]=JSON.parse(yield g()),o=e.name,figma.root.setPluginData(\"themes\",JSON.stringify(n)),figma.root.setPluginData(\"savedWorkingTheme\",o),figma.ui.postMessage({type:\"loadThemes\",themes:n,imgs:a,working:o}),t.cancel(),figma.notify(\"Current color theme saved!\",{timeout:2e3})}));figma.ui.onmessage=e=>{\"theme\"===e.type?function(e){let t,i,r=figma.getLocalPaintStyles();for(let a of n[e.name]){t=!1;for(let e of r)a.name===e.name&&(e.paints=a.paints,t=!0);t||(i=figma.createPaintStyle(),i.name=a.name,i.paints=a.paints)}o=e.name,figma.root.setPluginData(\"savedWorkingTheme\",o),figma.ui.postMessage({type:\"loadThemes\",themes:n,imgs:a,working:o})}(e):\"saveCurrent\"===e.type?l(e):\"delete\"===e.type?function(e){delete n[e.name],figma.root.setPluginData(\"themes\",JSON.stringify(n)),figma.ui.postMessage({type:\"loadThemes\",themes:n,imgs:a,working:o})}(e):\"importThemes\"===e.type?function(e){let t;try{t=JSON.parse(e.value)}catch(e){return void figma.notify(\"Incomplete JSON expression.\")}try{for(let e of Object.keys(t.savedThemes))n[e]=t.savedThemes[e];for(let e of Object.keys(t.savedImgs)){let i=Uint8Array.from(t.savedImgs[e]);a[e]||(a[e]=t.savedImgs[e],figma.createImage(i))}}catch(e){return void figma.notify(\"Invalid color theme profile.\")}figma.root.setPluginData(\"themes\",JSON.stringify(n)),figma.root.setPluginData(\"savedImgs\",JSON.stringify(a)),Object.keys(n).length>0&&figma.ui.postMessage({type:\"loadThemes\",themes:n,imgs:a,working:o}),figma.notify(\"Color theme(s) import complete!\",{timeout:4e3})}(e):\"update\"===e.type&&l(e)}}});","extractedComments":[]}